 % !TeX encoding = ISO-8859-1
 \chapter{RIOT-Overview}
 \label{chap:overview}
 
 \section{Übersicht über RIOT}
 
 RIOT ist ein Open Source-Mikrokernel-basiertes Betriebssystem, das auf die Anforderungen von IOT-Geräten und anderen eingebetteten Geräten abgestimmt ist. Diese Anforderungen umfassen einen sehr geringen Speicherbedarf in der Größenordnung von einigen Kilobytes, eine hohe Energieeffizienz, Echtzeitfähigkeiten, Kommunikationsstapel für sowohl drahtlose als auch drahtgebundene Netzwerke und Unterstützung für eine breite Palette von Niedrigleistungs-Hardware.
 RIOT stellt einen Mikrokernel, mehrere Netzwerkstapel und Dienstprogramme bereit, die kryptografische Bibliotheken, Datenstrukturen, Hash-Tabellen und eine Shell umfasst. RIOT unterstützt eine breite Palette von Mikrocontroller-Architekturen, Radiotreibern, Sensoren und Konfigurationen für ganze Plattformen. Über alle unterstützten Hardware 32-Bit-, 16-Bit- und 8-Bit-Plattformen bietet RIOT eine konsistente API und ermöglicht ANSI C und C ++ Anwendungsprogrammierung, mit Multithreading, IPC, System-Timer und Mutexes. Es ist unter der LGPL lizenziert und wird von der Freien Universität Berlin, dem Institut national de recherche en informatique et en automatique (INRIA) und der Hochschule für Angewandte Wissenschaften Hamburg entwickelt.\cite{RIOTProjectDocumentation}
 

 \section{Ziele}
 Das Vorgängerprojekt von RIOT hieß Feuerware und war als Betriebssystem für drahtlose Sensornetzwerke gedacht. Entwickelt wurde es im Rahmen des FeuerWhere Projekts, das Feuerwehrmänner im Einsatz überwachen sollte. 2008 wurde an der Freien Universität Berlin mit der Entwicklung begonnen. Im Jahr 2010 kam es zu einer Abspaltung (Fork) von Feuerware und das Programm wurde in RIOT umbenannt. Damit einhergehend wurde IETF-Protokolle wie etwa 6LoWPAN, RPL und TCP implementiert, um es für einen Einsatz im Internet anzupassen. 2013 erfolgte die Umbenennung in RIOT. 
  
  \begin{figure}[h]
  	\centering
  	\includegraphics[width=1.0\linewidth]{bilder/RIOT.png}
  	\caption{Übersicht über das RIOT}
  	\label{fig:components}
  \end{figure} 
  \vspace{5mm} 
   
 RIOT-Programme können in C und C++ geschrieben werden. Es ist im Gegensatz zu anderen kleinen Betriebssystemen wie TinyOS echtes Multithreading verfügbar. Für Linux und MacOS existieren native Portierungen, so dass Anwendungen auf dem Computer geschrieben und dann schnell auf echte Hardware portiert werden können, was das Debugging erleichtern soll. Dabei werden Standardwerkzeuge wie GNU Compiler Collection (GCC), GNU Debugger benutzt.[3] Aufgrund der Herkunft als Betriebssystem für Sensornetzwerke bei der Feuerwehr ist RIOT echtzeitfähig. Teile des POSIX-Standards sind implementiert.
 Der Quellcode liegt auf GitHub und wird von einer freien Entwickler-Community mitentwickelt.\cite{RIOTProjectDocumentation}
 
 \section{Aufbau}
 
 Dieser Abschnitt führt Sie durch die Struktur von RIOT. Sobald Sie diese Struktur verstehen, verstehen Sie den RIOT-Code-Basis.
 
 \vspace{5mm} 
 \begin{figure}[h]
  \centering
  \includegraphics[width=0.8\linewidth]{bilder/RIOT.jpg}
  \caption{Struktur von RIOT}
  \label{fig:components}
 \end{figure}
 \vspace{10mm}

 
 Die Codebasis von RIOT ist in vier Gruppen eingeteilt.
  
 \begin{itemize}
   \item Der Kernel (Core)
   \item Plattformspezifischer Code (CPU)
   \item Gerätetreiber (Drivers)
   \item Bibliotheken und Netzwerk-Code (sys; pkg)
 \end{itemize}
 \vspace{4mm}
  
  Darüber hinaus enthält RIOT eine Sammlung von Skripten für verschiedene Aufgaben, sowie eine vordefinierte Umgebung für die Erstellung dieser Dokumentation. Die Strukturgruppen werden auf die Verzeichnisstruktur von RIOT projiziert, wobei jede dieser Gruppen in einem oder zwei Verzeichnissen im Haupt-RIOT-Verzeichnis liegt. Die folgende Liste enthält eine detaillierte Beschreibung der einzelnen Verzeichnisse des RIOTs:
  
  
  \vspace{5mm}
  
  Core:
  
  Dieses Verzeichnis enthält den eigentlichen Kernel. Der Kernel besteht aus dem Scheduler, der Interprozess-Kommunikation (Messaging), dem Threading, der Threadsynchronisation und den unterstützenden Datenstrukturen und Typdefinitionen.
  
  \vspace{5mm}
  
  Board:
  
  Der plattformabhängige Code ist in zwei logische Elemente CPU und Board unterteilt. Eine Board hat genau eine CPU, während eine CPU Teil von vielen Boards sein kann. Der CPU-Teil enthält alle generischen, CPU-spezifischen Code.
  
  Der Board-Teil enthält die spezifische Konfiguration für die darin enthaltene CPU. Diese Konfiguration umfasst hauptsächlich die Peripheriekonfiguration und Pin-Mapping, die Konfiguration von On-Board-Geräten und die Taktkonfiguration der CPU. Zusätzlich zu den Quell- und Header-Dateien, die für jedes Board benötigt werden, kann dieses Verzeichnis zusätzlich einige Skript- und Konfigurationsdateien enthalten, die für die Anbindung an die Boards benötigt werden. 
  
  \vspace{5mm}
  
  CPU:
  
  Für jede unterstützte CPU enthält dieses Verzeichnis ein Unterverzeichnis mit dem Namen der CPU. Diese Verzeichnisse enthalten dann alle CPU-spezifischen Konfigurationen, wie Implementierungen des Energiemanagements (LPM), Interrupt-Handler und Vektoren, Startupcode und Taktinitialisierungscode. Für die meisten CPUs finden Sie auch die Linkerskripte im Unterverzeichnis.
  
  Im Periph-Unterverzeichnis jeder CPU finden Sie die Implementierungen der Peripherie-Treiber wie SPI, UART, GPIO, etc. Viele CPUs teilen einen bestimmten Code, z.B. alle ARM Cortex-M-basierten CPUs verwenden denselben Code für den Taskwechsel und den Interrupthandler. Dieser freigegebene Code hat ein eigenes Verzeichnis.
  
  \vspace{5mm}
  
  Drivers:
  
  Dieses Verzeichnis enthält die Treiber für externe Geräte wie Netzwerkschnittstellen, Sensoren und Aktoren. Jeder Gerätetreiber wird in ein eigenes Unterverzeichnis mit dem Namen des Geräts eingefügt.
  
  Alle Gerätetreiber des RIOT basieren auf der peripheren Treiber-API z.B. SPI, GPIO und anderen RIOT-Modulen wie dem xtimer. Auf diese Weise sind die Treiber völlig plattformunabhängig.
  
  \vspace{5mm}
  
  Sys /net:
  
  RIOT folgt dem Mikrokern-Design-Paradigma, wo alles ein Modul sein soll. Alle diese Module, die nicht Teil der Hardware-Abstraktion oder Gerätetreiber sind, können in diesem Verzeichnis gefunden werden. Die Bibliotheken umfassen Datenstrukturen, Kryptobibliotheken, Hight-level APIs und Speicherverwaltung. 

  Das Unterverzeichnis sys / net muss explizit erwähnt werden, da hier der gesamte Netzwerkcode im RIOT liegt. Hier finden Sie die Netzwerk-Stack-Implementierungen z.B. den GNRC-Stack.
  
  \vspace{5mm}
  
  Pkg:
  
  RIOT unterstützt mehrere externe Bibliotheken z.B. OpenWSN, Microcoap. Die exteren Bibliotheken werden als benutzerdefinierte Makefiles ausgeliefert. Die Bibliothek lädt optional eine Anzahl von Patches herunter, damit RIOT funktioniert. Diese Makefiles und Patches finden Sie im pkg-Verzeichnis.\cite{RIOTProjectDocumentation}
  
   \vspace{60mm}
  
 \section{Unterstützung}
 
  Momentan unterstützt der RIOT-Kernel gemäss Angaben auf der Projektseite \cite{RIOTProjectDocumentation} Prozessoren der Architekturen ARM. Somit  kann es sowohl auf einem System-Emulator wie z.B. Qemu kompiliert werden oder auf einer unterstützten Hardware. Folgende Hardware-Hersteller wurden zum Zeitpunkt unserer Projektarbeit unterstütz:

   
   \begin{center}
   	\begin{tabular}{ | l |}
   		\hline
   		\textbf{Hersteller} 	\\ \hline
   		Arduino		I 			\\ \hline
   		ARM architecture 		\\ \hline
   		Atmel 					\\ \hline
   		Freescale				\\ \hline
   		IoT-LAB					\\ \hline	
   		MSB						\\ \hline	
   		Nordic Semiconductor 	\\ \hline
   		Nucleo					\\ \hline
   		NXP						\\ \hline
   		PIC microcontroller		\\ \hline
   		STMicroelectronics		\\ \hline
   		Texas Instruments		\\ \hline
   		\hline
   	\end{tabular}
   \end{center}
   
 \vspace{4mm}
   
 Zur Kommunikation unterstützt das RIOT-Betriebssystem eine Vielzahl an Kommunikations-Protokolle. Da der Fokus auf das Internet der Dinge gelegt wurde, wurden auch die entsprechenden Protokolle zuerst implementiert. 
    
 Folgende Tabelle zeigt die Kommunikationsmöglichkeiten sowohl die vom Betriebssystem unterstützte Hardwarekomponenten wie auch die unterstützten Protokolle:
    
    
 \begin{center}
  \begin{tabular}{ | l | l |}
		\hline
		\textbf{Protokoll} 		& \textbf{Hardwarekomponente} \\ \hline
		Bluetooth 4.0 			& ADC 			\\ \hline
		CoAP / CSMA / CA		& Ethernet		\\ \hline
		IPv4 / IPv6				& Flash / RAM 	\\ \hline
		IEEE 802.15.4 		 	& GPIO			\\ \hline
		NTP / UNTP				& SPI			\\ \hline
		UDP / UHCP				& UART			\\ \hline
		6LoWPAN 				& 				\\ \hline
		Radios					& 				\\ \hline
		Wi-Fi					& 				\\ \hline
		\hline
   \end{tabular}
  \end{center}



